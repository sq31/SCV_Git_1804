![Работа в Git](gitlogo.png)

# Работа с Git
## 1. Проверка наличия установленного Git.
В терминале выполнить команду `git version`

Если Git установлен, появится ообщение с информацией о версии файла. Иначе будет сообщение об ошибке.

## 2. Установка Git.
Загружаем последнюю версию Git с сайта https://git-scm.com/download

Устанавливаем с настройками по умолчанию.

## 3. Настройка Git.
При первом использовании Git необходимо представиться.
Для этого необходимо ввести в терминале 2 команды:
```
git config --global user.name "Ваше имя"
git config --glabal user.email "почта@почта.ru"
```
## 4. Инициализация репозитория.
Получить репозиторий можно двумя способами:
* в терминале переходим к папке в которой хотим создать репозиторий.
Выполняем команду `git init`
В исходной папке появится скрытая папка *.git*, содержащая все необходимые файлы репозитория - структуру Git репозитория.
* Клонировать существующий репозиторий Git из любого места. Сделать этоможно командой:
```
git clone <адрес репозитория>
```
## 5. Запись изменений в репозиторий.
Чтобы смотреть состояние файлов в репозитории, необходимо выполнить команду:
```
git status 
```
Для того чтобы начать отслеживать новый файл используется команда
```
git add <имя файла с расширением>
```
Чтобы записать индексированные изменения в репозиторий Git, необходимо ввести команду
```
git commit -m "Сообщение 1"
```
где маркер **-m** обозначает *message*.

Чтобы сравнить текущий файл и закоммиченный и увидеть разницу между ними, необходимо ввести
```
git diff
```
Будет показано количество добавленных и удаленных строк, а так же их содержание.


## 6. Просмотр истории коммитов.
Для просмотра истории коммитов используется команда:
```
git log
```
данная команда перечисляет коммиты с их хэш-кодами, именем и электронной почтой, датой создания и сообщением коммита. 
По умолчанию, последние коммиты находятся вверху.
Для выхода из режима просмотра используется клавиша **"Q"**.

Команда
```
git log --oneline
```
позволяет просмотреть укороченную версию истории коммитов.

Если необходимо визуализировать ветки, тодостаточно ввести команду:
```
git log --graph
```

При добавлении дополнительного параметра можем выводить определенное число последних коммитов, например:
```
git log --oneline -3
git log --oneline -10
```
отобразит последние 3, или 10 коммитов.

## 7. Перемещение между сохранениями (коммитами).
Чтобы перейти к нужному сохранению (коммиту) можно использовать команду:
```
git checkout <хеш-код> 5-6 первых символов
```
Такой переход можно использовать только для просмотра!
Пример использования команды `git checkout`:
```
git checkout 43d6f1
```
Продолжить работу над файлом можем только после перехода на верх ветки командой:
```
git checkout master
```

## 8. Игнорирование файлов.
Чтобы скрыть определенные файлы (картинки, файлы конфигураций) от контроля версий следует создать файл:
```
.gitignore
```
далее в левой панели Git выбираем данный файл и прописываем в нем имена файлов с расширением, которые необходимо исключить из контроля.

Каждая новая строка это отдельный шаблон (правило) для исключения.

Так же, возможно исключение файлов по маске. Например, указав *.jpg мы исключим из отслеживания все jpg файлы.

При добавлении *!* в начале строки перед именем файла шаблон принимает обратное правило, файл будет отслеживаться. Например, указав 
```
*.jpg 
!Logo.jpg
```
мы отменяем контроль за изменениями над всеми *jpg* файлами, но следующей строкой - инвертируем его действие для файла Logo.jpg

Возможно добавить комментарий. Для этого в начале строки необходимо поставить символ *#* и далее указать комментарий для исключаемого правила.
```
# Исключаем файл Logo.jpg из правила *.jpg
```
## 9. Работа с ветками.
В Git возможно создать новую ветку, в которой следует разместить новую возможноть (код), не попадающий в основной код программы, и позже удалить ее. Для управления ветками в репозитории используется команда
```
git branch
```
## 9.1. Создание ветки.
Для создания новой ветки, например с именем *test_form* следует ввести 
```
git branch test_form
```
после чего у нас будет создана новая ветка с этим именем. Перейти в новую ветку мы можем командой *git checkout*
```
git checkout test_form
```
и продолжить работу уже в ней.

## 9.2. Слияние веток.
Если отдельная ветка протестирована и ее необходимо добавить к основной - нам следует, находясь в основной ветке master, применить команду
```
git merge <имя ветки>
```
например **git merge test_form**.

После чего, при отсутствии конфликтов, произойдет добавление ветки test_form в master. В случае наличия конфликтов будет предложен выбор: оставить основную информацию, оставить добавляемую, добавить
и ту и другую (откорректировав их в дальнейшем), либо произвести их сравнение.

## 9.3. Удаление веток.
В случае неактуальности отдельной ветки ее можно удалить командой *git branch* добавив ключ **-d**
```
git branch -d <имя ветки>
```
Например: *git branch -d test_form*

Ветка удалится, если вся информация из нее успешно перенесена и закоммитена. 
Если же  вней осталась информация после котоорой не был создан коммит, то будет выведено предупреждение. Такую ветку можно удалить с ключем **-D**
Например: *git branch __-D__ test_form*

## 9.4. Разрешение конфликтов.
В случае, если мы перешли в один из коммитов (точки сохранения) и продолжили в нем работу, забыв при этом вернуться в нужную ветку  - в дальнейшем возникнет конфликт. Для его разрешения необвыполнить следующее:
1. Создать коммит.
2. Командой *git status* получить предупреждение вида:
```
HEAD detached from 1937a54
nothing to commit, working tree clean
```
в котором указана метка коммита где ветка была отцеплена, в данном случае это **1937a54**.

3. Создаем ветку с аналогичным названием (для удобства) и переходим в нее. Проверяем *git log* что данной ветке принадлежат нужные нам коммиты.

4. Переходим в ветку master.
5. Объедняем ветку master с **1937a54**
6. Изучаем конфликт, выбираем нужную для сохранения информацию.
7. Создаем коммит находясь в ветке *master*.

## 10. Работа с удаленным репозиторием.
Для создания удаленного репозитория на GitHub необходимо:
1. Иметь зарегистрированный аккаунт.
2. Далее, в верхнем правом углу, нажимаем на иконку со значком "**`+`**". В выпадающем списке выбираем "New repository".
3. В открывшемся окне, присваиваем имя репозиторию, в поле "**`Repository name`**".
Проверяем (при необходимости сделать его общедоступным) наличие отметки "**`Public`**".
4. Нажимаем кнопку "**`Create repository`**" в нижней части экрана.
5. В следующем окне GitHub подсказывает какие команды необходимо ввести для установления связи с репозиторием при создании нового файла, либо при наличии уже существующего.
6. Далее, устанавливаем связь удаленного репозитория с локальным. Используем подсказку GH, вводим
```
git remote add origin https://github.com/"accountname"/"repositoryname".git
```
Можем проверить, установилась ли связь локального репозитория с удаленным (origin), для этого используем команду **git remote**. При наличии корректной связи Git указывает удаленный репозиторий **origin**.

При вводе **git remote -v** Git покажет полный путь к удаленному репозиторию, ссылки на загрузку данных (pull) и на их выгрузку (push).

7. Переименовываем основную ветку "**`master`**" в "**`main`**" командой 
```
git branch -M main
```

8. После ввода
```
git push -u origin main
```
Git загружает (за'push'ивает) файлы из локального репозитория в удаленный на GitHub.

## 10.1 Fork
Для создания Fork'а (ответвления, дословно с англ. fork-вилка) необходимо в GitHub найти интересующий проект и перейти в репозиторий, где он хранится. 

Далее, в верхнем правом углу нажимаем на кнопку "**`Fork`**".

В следующем окне в поле "**`Repository name`**" указываем имя репозитория в нашем аккаунте GitHub для хранения созданного Fork'а.

Опцонально можем заполнить поле "**Description**" кратким описанием.

Нажимаем кнопку "**Create fork**" и он копируется в наш репозиторий. Готово!

## 10.2 Clone
Для клонирования данных из репозитория GitHub в локальный репозиторий Git необходимо зайти в нужный репозиторий (наш, или на аккаунте другого пользователя).

Нажимаем на зеленую кнопку "**Code**" и в выпадающем списке видим ссылку на наш репозиторий. 

Копируем ссылку нажав на кнопку справа от нее.

Переходм в Git, и в терминале вводим команду с нашей ссылкой
```
git clone https://github.com/"accountname"/"repositoryname".git
```
Данные клонируются в наш локальный проект и устанавливается связь.

После может потребоваться применение команды 
```
cd <имя папки с репозиторием>
```
чтобы перейти в склонированный репозиторий.

Далее, командами **Pull** или **Push** мы можем загружать или вытягивать необходимые данные.

## 10.3 Pull
Для актуализации данных на локальном репозитории Git из удаленного репозитория на GitHub (при наличии уже установленной связи 2х репозиториев), необходимо ввести команду 
```
git pull
```
Данные "вытягиваются" (от англ. pull-тянуть).
## 10.4 Push
Для актуализации данных в удаленном репозитории на GitHub из локального репозитория Git (при наличии уже установленной связи 2х репозиториев), необходимо ввести команду 
```
git push
```
Данные "заталкиваются" (от англ. push-толкать).

Приналичии в Git ветки, которая отсутствует в версии проекта на GitHub, используя команду "**Push**" мы получим сооттветствующую ошибку и подсказку по ее решению. Необходимо ввести команду
```
git push --set-upstream origin <имя новой ветки>
```
которая создаст новую ветку в проекте на GitHub и преенесет в нее новые данные.

## 10.5 Pull Request
При желании помочь и поработать совместно над чьим-то проектом необходимо:
1. Найти интересующий нас проект.
2. Создать Fork и разместить в своем репозитории (раздел 10.1).
3. Сделать Clone в репозиторий Git (раздел 10.2).
4. Создаем отдельную ветку для работы и продолжаем работу в ней.
5. Вносим необходимые изменения/дополнения в проект (работа с текстом, добавление файлов и пр.).
6. Загружаем изменения коммандой Push (раздел 10.4).
7. Переходим в GitHub. В окне с проектом который Fork'нули появляется кнопка "**`Compare & pull request`**". Она проводит сравнение внесенных изменений и предлагает к просмотру ветку содержащую изменения.

Если изменения не произошло и кнопка не отобразилась, то:
1. В левой части экрана можем нажать на кнопку с названием основной ветки **master** и в выпадающем списке выбрать ветку содержащую в себе изменения (которые необходимо отправить автору проекта).

Либо:

2. Если кнопка не появилась, то находясь в своем репозитории переходим на вкладку "*`Pull requests`*" и нажимаем на кнопку "**`New Pull requests`**". Происходит обновление данных, и при сравнении веток появляется нужная нам кнопка.

Далее мы можем заполнить заголовок к **`Pull request`** и поле с комментарием.

Нажимаем кнопку
```
Create Pull request
```
и отправляет запрос с внесением предложений на изменение, включая обновленные и новые файлы.

## 10.6 Pull Request (для владельца проекта)
На аккаунте и в репозитории владельца проекта появляется наш запрос, который возможно просмотреть и ознакомиться с предложениями.

Есть возможность загрузить предложенные изменения в локальный репозиторий и ознакомиться с ними более детально для принятия корректного решения.

При нажатии на кнопку "**`Merge Pull request`**" происходит слияние новой ветки (с изменениями направленными другим пользователем) с основным проектом.